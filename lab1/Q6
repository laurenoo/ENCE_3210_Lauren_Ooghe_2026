// Lab 1 - Q5 - Lauren Ooghe 
// When the button is pressed, turn on the red, green, and blue color LEDs with the following order:
// R – RG – RGB – GB – B – RB repeated until the button is pressed again.

// assign pins to LEDs
#define DELAY_TIME 500

// assign pin values
int R_LED = 5;
int G_LED = 4;
int B_LED = 11;
int button = 2;

bool running = false;  // state to compare button value HIGH or LOW
bool buttonState = HIGH;    // set button to HIGH initially
unsigned long toggleTime = 0;    // used for debouncer in interrupt sequence


void setup() {
// assign pins as INPUT or OUTPUT
pinMode(R_LED, OUTPUT);
pinMode(G_LED, OUTPUT);
pinMode(B_LED, OUTPUT);
pinMode(button, INPUT_PULLUP);

// create interrupt to button pin so that the program will stop
// when the button is pressed while in the middle of running the loop code
attachInterrupt(digitalPinToInterrupt(button), buttonPress, CHANGE);

}

void loop() {
  bool buttonRead = digitalRead(button);    // read button status
    // detect button press
  if (buttonState == HIGH && buttonRead == LOW) {    // if the button state variable is HIGH AND the button pin is LOW
    running = !running;     // change toggle state
    delay(500);             // delay
  }
  buttonState = buttonRead;    // set the button state equal to button pin value so that when button is pressed, the program will run


// if the button is pressed and running is true, run through the loop to turn LEDs on and off sequence
  if (running){
    digitalWrite(R_LED, HIGH);
    digitalWrite(G_LED, LOW);
    digitalWrite(B_LED, LOW);

    delay(DELAY_TIME);

    digitalWrite(R_LED, HIGH);
    digitalWrite(G_LED, HIGH);
    digitalWrite(B_LED, LOW);

    delay(DELAY_TIME);

    digitalWrite(R_LED, HIGH);
    digitalWrite(G_LED, HIGH);
    digitalWrite(B_LED, HIGH);

    delay(DELAY_TIME);

    digitalWrite(R_LED, LOW);
    digitalWrite(G_LED, HIGH);
    digitalWrite(B_LED, HIGH);

    delay(DELAY_TIME);

    digitalWrite(R_LED, LOW);
    digitalWrite(G_LED, LOW);
    digitalWrite(B_LED, HIGH);

    delay(DELAY_TIME);

    digitalWrite(R_LED, HIGH);
    digitalWrite(G_LED, LOW);
    digitalWrite(B_LED, HIGH);

    delay(DELAY_TIME);

  }
  
  else {
    // turn all LEDs off when stopped
    digitalWrite(R_LED, LOW);
    digitalWrite(G_LED, LOW);
    digitalWrite(B_LED, LOW);
  }
}

// added interrupt to stop the program while in the middle if the button is pressed again
void buttonPress(){
  unsigned long t = millis();       // debounce
  if (t - toggleTime > 200) {
    running = !running;             // toggle state to turn button pin off
    toggleTime = t;
  }
}

